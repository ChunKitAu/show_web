<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>后台管理</title>

    <script type="text/javascript" src="webjars/jquery/3.3.1/jquery.min.js"></script>
    <script type="text/javascript" src="webjars/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="webjars/bootstrap/3.3.5/css/bootstrap.min.css">
    <link rel="stylesheet" href="webjars/bootstrap/3.3.5/css/bootstrap-theme.css">

<!--    <script src="//cdn.bootcss.com/jquery/2.1.1/jquery.min.js"></script>-->
<!--    <link href="//cdn.bootcss.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" rel="stylesheet">-->
<!--    <link href="//cdn.bootcss.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">-->
<!--    <script src="//cdn.bootcss.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>-->

    <script src="ckeditor/ckeditor.js" ></script>

</head>

<body>


<div th:replace="commons/bar::head"></div>
<div class="container-fluid">

    <div class="row">
        <!--引入侧边栏-->
        <div th:replace="commons/bar::#sidebar(activeUri='publish')"></div>

        <main role="main" class="col-md-9 ml-sm-auto col-lg-10 pt-3 px-4">

            <form method="post" action="/article" id="form1">


                <input type="hidden" name="_method" />
                <input type="hidden" name="id" />

                <div class="form-group">
                    <label> 标题:</label>
                    <input type="text" name="title" id="title"/>
                </div>
                <div class="form-group">
                    <label> 类型:</label>
                    <input type="text" name="type" id="type"/>
                </div>

                <div class="form-group">
                    <label> 转载:</label>
                    <input type="text" name="reblog"  id="reblog"/>
                </div>

                <div class="form-group">
                                <textarea name="content" id="editor1" >
                            </textarea>
                </div>
                <button type="submit" class="btn btn-default" id="btn">提交</button>
            </form>
            <button id="a">asdnasld</button>

        </main>

    </div>
</div>

</body>


<script>
    CKEDITOR.replace( 'editor1');

    $(function () {
        //获取url参数
        var parameterURL =location.search.substring(1, location.search.length);
        if(parameterURL!= null){
            $('#btn').val('修改');
            //获取id
            var id = parameterURL.substring(3,parameterURL.length);
            getValue(id);
        }

    })

    function getValue(id){
        $.ajax({
            url: "/article/" + id,
            type: "GET",
            success: function (result) {
                console.log(result);
                if (result.code == 200) {
                    //数据回显
                    $('#title').val(result.data.title);
                    $('#type').val(result.data.type);
                    $('#reblog').val(result.data.reblog);
                    $('#editor1').val(result.data.content);
                }
            }
        })
    }



    $("#a").click(function () {
        var parameterURL =location.search.substring(1, location.search.length);
        var id = parameterURL.substring(3,parameterURL.length);
        alert(parameterURL+id);
    })

    $("#Submit").click(function () {

        var data = CKEDITOR.instances.editor1.getData();

    })

</script>


</html>